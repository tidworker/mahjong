<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>語音點餐紀錄</title>
</head>
<body>
<div>
  <h1>點餐紀錄</h1>
  <ul id="orderList"></ul>
</div>
<div>
  <h1>總金額</h1>
  <div>總金額：<span id="totalAmount"></span>元</div>
</div>

<div>
  <button onclick="clearData()">清除紀錄</button>
</div>

<script>
  const menu = {
    '蔥油餅加蛋': 30
  };

  function loadFromLocalStorage() {
    const orderData = JSON.parse(localStorage.getItem('orderList')) || [];
    let totalAmount = 0;

    orderData.forEach(order => {
      updateList('orderList', order);
      const [itemName, itemQuantity] = parseOrder(order);
      if (menu.hasOwnProperty(itemName)) {
        totalAmount += menu[itemName] * itemQuantity;
      }
    });

    document.getElementById('totalAmount').textContent = totalAmount;
  }

  function updateList(listId, text) {
    const ul = document.getElementById(listId);
    const li = document.createElement('li');
    li.textContent = text;
    ul.appendChild(li);
  }

  function parseOrder(order) {
    const orderMatch = order.match(/([蔥油餅加蛋]+)\s*x\s*(\d+)/);
    if (orderMatch) {
      const itemName = orderMatch[1];
      const itemQuantity = parseInt(orderMatch[2]);
      return [itemName, itemQuantity];
    }
    return [null, 0];
  }

  function clearData() {
    const orderData = JSON.parse(localStorage.getItem('orderList')) || [];
    localStorage.removeItem('orderList');
    document.getElementById('orderList').innerHTML = '';

    orderData.forEach(order => updateList('orderList', order));
  }

  loadFromLocalStorage();
</script>
</body>
</html>